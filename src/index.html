<!DOCTYPE html>
<html lang="de" data-theme="neon">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LoadSh.it Desktop</title>
  <link rel="stylesheet" href="styles/themes.css">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/titlebar.css">
  <link rel="stylesheet" href="styles/settings.css">
  <link rel="stylesheet" href="styles/queue.css">
  <link rel="stylesheet" href="styles/mini-widget.css">
  <link rel="stylesheet" href="styles/mediathek.css">
  <link rel="stylesheet" href="styles/alerts.css">
</head>
<body>
  <!-- Mini Widget Mode (Edge Dock) -->
  <div class="mini-widget" id="miniWidget">
    <div class="mini-widget-header">
      <img src="assets/logo.svg" alt="LoadSh.it" class="mini-widget-logo" id="miniWidgetToggle" draggable="false">
      <div class="mini-widget-header-actions">
        <button class="mini-widget-action-btn" id="miniWidgetMediathek" title="Mediathek">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 11v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
            <path d="M4 11V6a2 2 0 0 1 2-2h3l2 2h7a2 2 0 0 1 2 2v3"></path>
            <circle cx="12" cy="15" r="2"></circle>
          </svg>
        </button>
        <button class="mini-widget-undock" id="miniWidgetUndock" title="Normaler Modus">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 3 21 3 21 9"></polyline>
            <polyline points="9 21 3 21 3 15"></polyline>
            <line x1="21" y1="3" x2="14" y2="10"></line>
            <line x1="3" y1="21" x2="10" y2="14"></line>
          </svg>
        </button>
      </div>
    </div>
    <div class="mini-widget-content" id="miniWidgetContent">
      <div class="mini-widget-input-wrapper">
        <input type="url" class="mini-widget-input" id="miniWidgetInput" placeholder="URL einfügen...">
        <button class="mini-widget-paste" id="miniWidgetPaste" title="Einfügen">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
        </button>
      </div>
      <!-- Video Preview in Mini Widget -->
      <div class="mini-widget-video-preview" id="miniWidgetVideoPreview">
        <button class="mini-widget-preview-close" id="miniWidgetPreviewClose" title="Schließen">
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        <div class="mini-widget-video-info">
          <img id="miniWidgetThumbnail" class="mini-widget-thumbnail" src="" alt="">
          <div class="mini-widget-video-details">
            <h4 id="miniWidgetVideoTitle" class="mini-widget-video-title">Video Titel</h4>
            <p id="miniWidgetVideoChannel" class="mini-widget-video-channel">Kanal</p>
            <span id="miniWidgetVideoDuration" class="mini-widget-video-duration">0:00</span>
          </div>
        </div>
        <div class="mini-widget-quality-row" id="miniWidgetQualityRow">
          <!-- Quality buttons will be inserted here -->
        </div>
      </div>
      <!-- Loading indicator -->
      <div class="mini-widget-loading" id="miniWidgetLoading" style="display: none;">
        <svg class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10" stroke-opacity="0.3"></circle>
          <path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"></path>
        </svg>
        <span style="font-size: 0.7rem; color: var(--text-muted);">Lädt...</span>
      </div>
      <button class="mini-widget-download" id="miniWidgetDownload">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        <span>Download</span>
      </button>
      <div class="mini-widget-progress" id="miniWidgetProgress">
        <div class="mini-widget-progress-bar" id="miniWidgetProgressBar"></div>
        <span class="mini-widget-progress-text" id="miniWidgetProgressText">0%</span>
      </div>
      <button class="mini-widget-open-folder" id="miniWidgetOpenFolder">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
        </svg>
        Öffnen
      </button>
      <!-- Mini Mediathek (for widget mode) -->
      <div class="mini-mediathek" id="miniMediathek">
        <div class="mini-mediathek-header">
          <span class="mini-mediathek-title">Mediathek</span>
          <button class="mini-mediathek-close" id="miniMediathekClose">
            <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="mini-mediathek-list" id="miniMediathekList">
          <!-- Items will be rendered here -->
        </div>
        <div class="mini-mediathek-empty" id="miniMediathekEmpty">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M4 11v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
            <path d="M4 11V6a2 2 0 0 1 2-2h3l2 2h7a2 2 0 0 1 2 2v3"></path>
          </svg>
          <span>Keine Downloads</span>
        </div>
        <button class="mini-mediathek-folder" id="miniMediathekFolder">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          </svg>
          Ordner öffnen
        </button>
      </div>
    </div>
  </div>

  <div class="app-window">
    <!-- Custom Titlebar -->
    <div class="titlebar" data-tauri-drag-region>
      <div class="titlebar-center-logo" data-tauri-drag-region>
        <a href="https://loadsh.it" target="_blank" rel="noopener" class="titlebar-link" id="titlebarLink">
          <img src="assets/logo.svg" alt="Logo" class="titlebar-logo">
          <span class="titlebar-title">LoadSh.it</span>
        </a>
      </div>
      <div class="titlebar-right">
        <button class="titlebar-btn dock-btn" id="dockBtn" title="Mini-Modus (Ctrl+D)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="14" y="3" width="7" height="18" rx="1"></rect>
            <path d="M7 8l-4 4 4 4"></path>
            <line x1="3" y1="12" x2="11" y2="12"></line>
          </svg>
        </button>
        <button class="titlebar-btn mediathek-btn" id="mediathekBtn" title="Mediathek (Ctrl+M)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 11v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
            <path d="M4 11V6a2 2 0 0 1 2-2h3l2 2h7a2 2 0 0 1 2 2v3"></path>
            <circle cx="12" cy="15" r="2"></circle>
          </svg>
        </button>
        <button class="titlebar-btn settings-btn" id="settingsBtn" title="Einstellungen">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
          </svg>
        </button>
        <button class="titlebar-btn minimize-btn" id="minimizeBtn" title="Minimieren">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
        </button>
        <button class="titlebar-btn close-btn" id="closeBtn" title="Schließen">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
    </div>

    <!-- Main Content -->
    <div class="app-content">
      <main class="downloader-card">
        <form id="downloadForm">
          <!-- URL Input -->
          <div class="url-input-wrapper">
            <div class="input-platform-icon" id="platformIcon"></div>
            <input
              type="url"
              id="urlInput"
              class="brutalist-input"
              placeholder="VIDEO URL EINFÜGEN"
              autocomplete="off"
            />
            <button type="button" id="pasteBtn" class="paste-btn" title="Einfügen">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
            </button>
          </div>

          <!-- Video Preview Card (shown when video is loaded) -->
          <div id="videoPreview" class="video-preview hidden">
            <button type="button" class="video-preview-close" id="videoPreviewClose" title="Schließen">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
            <img id="videoThumbnail" class="video-thumbnail" src="" alt="">
            <div class="video-info">
              <h3 id="videoTitle" class="video-title">Video Titel</h3>
              <p id="videoChannel" class="video-channel">Kanal</p>
              <div class="video-meta">
                <span id="videoDuration" class="video-duration">0:00</span>
                <span class="format-badge">MP4</span>
              </div>
            </div>
            <!-- Quality Selection -->
            <div class="quality-selector">
              <span class="quality-label">QUALITÄT</span>
              <div id="qualityButtons" class="quality-buttons">
                <!-- Buttons werden dynamisch eingefügt -->
              </div>
            </div>
            <!-- Inline Progress Bar (Neo-Brutalism) -->
            <div id="inlineProgress" class="inline-progress hidden">
              <div class="inline-progress-header">
                <span id="inlineProgressStatus" class="inline-status">DOWNLOAD</span>
                <span id="inlineProgressPercent" class="inline-percent">0%</span>
              </div>
              <div class="inline-progress-bar">
                <div id="inlineProgressFill" class="inline-progress-fill"></div>
              </div>
              <div class="inline-progress-info">
                <span id="inlineProgressSpeed">-- /s</span>
                <span id="inlineProgressEta">ETA: --:--</span>
              </div>
            </div>
          </div>

          <!-- Loading State -->
          <div id="loadingState" class="loading-state hidden">
            <svg class="spinner" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" stroke-opacity="0.3"></circle>
              <path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"></path>
            </svg>
            <span>Video wird geladen...</span>
          </div>

          <!-- Download Button -->
          <button type="submit" id="downloadBtn" class="brutalist-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <span class="btn-text">DOWNLOAD STARTEN</span>
          </button>

          <!-- Hidden inputs for form data -->
          <input type="hidden" id="formatSelect" value="mp4">
          <input type="hidden" id="qualitySelect" value="best">
        </form>

        <!-- Progress Section -->
        <div id="progressSection" class="progress-section hidden">
          <div class="progress-header">
            <span id="progressStatus" class="status-badge">Starte...</span>
            <span id="progressPercent" class="progress-percent">0%</span>
          </div>
          <div class="progress-bar">
            <div id="progressFill" class="progress-fill"></div>
          </div>
          <div class="progress-info">
            <span id="progressSpeed">-- /s</span>
            <span id="progressEta">ETA: --:--</span>
          </div>
        </div>

        <!-- Success Section -->
        <div id="successSection" class="success-section hidden">
          <div class="success-icon-wrapper">
            <svg class="success-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
          </div>
          <div class="success-content">
            <p>Download abgeschlossen!</p>
            <span id="successFilename">video.mp4</span>
          </div>
          <div class="success-actions">
            <button type="button" id="openFolder" class="open-folder-btn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
              </svg>
              Öffnen
            </button>
            <button type="button" id="closeSuccess" class="close-success-btn" title="Schließen">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        </div>

        <!-- Download Queue -->
        <div id="queueSection" class="queue-section hidden">
          <div class="queue-header">
            <h3>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="8" y1="6" x2="21" y2="6"></line>
                <line x1="8" y1="12" x2="21" y2="12"></line>
                <line x1="8" y1="18" x2="21" y2="18"></line>
                <line x1="3" y1="6" x2="3.01" y2="6"></line>
                <line x1="3" y1="12" x2="3.01" y2="12"></line>
                <line x1="3" y1="18" x2="3.01" y2="18"></line>
              </svg>
              Warteschlange
            </h3>
            <span class="queue-count" id="queueCount">0</span>
          </div>
          <div class="queue-list" id="queueList"></div>
          <div class="queue-actions">
            <button type="button" class="queue-btn" id="clearQueue">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
              Leeren
            </button>
          </div>
        </div>
      </main>

      <!-- Platforms Bar -->
      <div class="platforms-bar">
        <div class="platforms-icons">
          <span class="platform-icon" title="YouTube">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
            </svg>
          </span>
          <span class="platform-icon" title="TikTok">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
            </svg>
          </span>
          <span class="platform-icon" title="Instagram">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <rect x="2" y="2" width="20" height="20" rx="5"/>
              <circle cx="12" cy="12" r="4"/>
              <circle cx="17.5" cy="6.5" r="1.5" fill="currentColor" stroke="none"/>
            </svg>
          </span>
          <span class="platform-icon" title="X / Twitter">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
          </span>
          <span class="platform-icon" title="Facebook">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
              <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
            </svg>
          </span>
          <span class="platform-icon more" title="Und 1000+ weitere Plattformen">+1000</span>
        </div>
      </div>

      <!-- Footer -->
      <footer class="app-footer">
        <div class="footer-links">
          <a href="https://loadsh.it" target="_blank" rel="noopener">loadsh.it</a>
          <span class="separator">•</span>
          <a href="https://github.com/Aimtaim/loadshit-desktop" target="_blank" rel="noopener">GitHub</a>
          <span class="separator">•</span>
          <span class="legal">Open Source - MIT License</span>
        </div>
        <div class="footer-version">LoadSh.it V2.0</div>
      </footer>
    </div>
  </div>

  <script type="module" src="scripts/main.js"></script>
</body>
</html>
